**Verification Process: Stage 4 Cycle Certification**

**Objective:** To formally verify that the changes implemented during the preceding Stage 4 cycle (bug fixes, refinements, new features) have been successfully completed, tested, documented, and integrated without introducing significant regressions. This process confirms the system has reached an improved, stable state, meeting the objectives of the completed refinement/development cycle and aligning with overall project goals.

**Timing:** Execute this process *after* completing a defined cycle of Stage 4 work (e.g., addressing specific bug reports from TASK 4.1, implementing refinements from TASK 4.2, or adding a new feature via TASK 4.3) and *before* considering the current version ready for potential deployment, further large-scale testing, or initiating a *new* major development cycle.

**Executor:** Solo Developer.

**Required Inputs:**

1. **Previous Verification Checklists:** Stage 1, 2, and 3 certification results.
2. **Stage 3 Artifacts (especially MAT Results):** The MAT Results Log from Stage 3 (TASK 3.4) that identified the issues addressed in this Stage 4 cycle.
3. **Stage 4 Planning/Input:**
    * List of specific bug reports (TASK 4.1) targeted in this cycle.
    * List of specific refinement tasks (TASK 4.2) targeted in this cycle (referencing MAT findings).
    * Specifications/requirements for any new features implemented (TASK 4.3) in this cycle.
4. **Stage 4 Outputs:**
    * **Updated Codebase:** The current state of the code in Git reflecting the fixes, refinements, and new features implemented.
    * **Updated Test Suites & Results:** Unit and integration tests (`pytest` reports showing passing status) including any *new* or *modified* tests covering the Stage 4 changes.
    * **Re-Test / New MAT Results:** Documentation of re-testing in Blackboard Ultra for addressed issues or testing results for new features. This might be updates to the original MAT log or a new log section.
    * Git commit history for the completed Stage 4 cycle work.

**Verification Method:** Use the following checklist. Review each item critically against the specified inputs and the current system state. Mark each item as Pass (✅) or Fail (❌). Add comments for any Failures.

**Verification Checklist: Stage 4 Cycle Outputs & Cumulative Consistency**

| Item ID | Category                 | Check                                                                                                                                                                        | Criteria for Pass                                                                                                                                                                                                                              | Result (✅/❌) | Comments / Remediation Needed |
| :------ | :----------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-----------: | :---------------------------- |
| **V4.1** | **Bug Fixes (4.1)**      | **Targeted Resolution:** Have the specific bugs targeted in this cycle (from Stage 3 MAT or other reports) been addressed in the codebase?                                      | Code changes exist corresponding to the targeted bug reports. Commit messages reference the fixes.                                                                                                                                           |       ☐       |                               |
| **V4.2** | **Bug Fixes (4.1)**      | **Verification:** Has re-testing (manual or automated) confirmed that the original bug symptoms are no longer present?                                                        | The specific steps to reproduce the original bugs now result in correct behavior. Relevant previously failing tests now pass.                                                                                                                |       ☐       |                               |
| **V4.3** | **Refinements (4.2)**    | **Targeted Implementation:** Have the specific refinements (based on Stage 3 MAT feedback, e.g., BB Ultra compatibility) targeted in this cycle been implemented in code/templates? | Code/template changes exist corresponding to the targeted refinement tasks. Commit messages reference the refinement purpose.                                                                                                          |       ☐       |                               |
| **V4.4** | **Refinements (4.2)**    | **Verification (BB Ultra):** Has re-testing in Blackboard Ultra confirmed that the refinements have achieved the desired outcome (e.g., improved rendering, fixed quirk)?         | Updated MAT log or re-test documentation shows the specific BB Ultra issue targeted by the refinement is resolved or significantly improved.                                                                                                   |       ☐       |                               |
| **V4.5** | **New Features (4.3)**   | **Implementation:** If new features/interactions were part of this cycle, are the corresponding code (models, endpoints, logic) and templates implemented?                  | New code/templates for the feature exist in the codebase.                                                                                                                                                                                    |       ☐       |                               |
| **V4.6** | **New Features (4.3)**   | **Testing (Automated):** Are there new unit and integration tests covering the core functionality of the new feature? Do these tests pass?                                    | New tests exist in the test suite covering the feature. `pytest` reports show these tests pass.                                                                                                                                              |       ☐       |                               |
| **V4.7** | **New Features (4.3)**   | **Testing (MAT):** Was MAT performed specifically for the new feature in Blackboard Ultra, and are the results documented?                                                    | MAT log includes results for the new feature, covering import, rendering, and functionality in BB Ultra. (Pass here means testing was done and documented, not necessarily zero issues found).                                                |       ☐       |                               |
| **V4.8** | **Regression Testing**   | **Test Suite Execution:** Does the *entire* automated test suite (unit and integration, including tests for older features) pass against the current codebase?                | `pytest` execution report for the full suite shows 0 failures/errors.                                                                                                                                                                          |       ☐       |                               |
| **V4.9** | **Regression Testing**   | **Manual Spot Checks:** Have spot checks been performed on previously working features (especially those related to changed areas) in BB Ultra to check for regressions?       | Self-attestation confirms basic checks on core, previously validated functionality were performed in BB Ultra, and no obvious regressions were noted. (Scope depends on changes made).                                                              |       ☐       |                               |
| **V4.10**| **Standards Alignment**  | **QTI/CP Compliance:** Do the changes (fixes, refinements, new features) maintain adherence to IMS QTI 2.1 / CP 1.2 standards? Did `lxml` validation continue to be used?    | Review of changes confirms standard-compliant approaches were prioritized. Refinements (esp. for BB Ultra) avoided non-standard hacks where possible. `lxml` validation should still be integrated and passing for generated samples.               |       ☐       |                               |
| **V4.11**| **Code Quality**         | **Linter/Formatter:** Does all new/modified code pass the configured linter/formatter checks?                                                                              | Running the linter/formatter shows no required changes in the modified files.                                                                                                                                                                |       ☐       |                               |
| **V4.12**| **Documentation**        | **Commit Messages:** Are Git commits for this cycle descriptive, referencing issues/tasks where applicable?                                                              | `git log` shows meaningful commit messages for the Stage 4 work performed.                                                                                                                                                                     |       ☐       |                               |
| **V4.13**| **Documentation**        | **Code Comments/Docs:** Have complex new logic or significant changes been appropriately commented? Have relevant docstrings been updated/added?                            | Review confirms necessary comments or updated docstrings are present for clarity.                                                                                                                                                            |       ☐       |                               |
| **V4.14**| **Documentation**        | **MAT Log Update:** Have MAT logs been updated to reflect the status of re-tested issues or the results for new features?                                                     | The MAT log accurately reflects the current state of tested features after this Stage 4 cycle.                                                                                                                                               |       ☐       |                               |
| **V4.15**| **Overall State**        | **Stability & Improvement:** Is the current state of the application considered more stable and functionally improved compared to the end of the last verification stage (Stage 3 or previous Stage 4 cycle)? | Based on test results and issue resolution, the application meets the goals set for this Stage 4 cycle and represents an improvement. No major new instabilities were introduced.                                                                |       ☐       |                               |
| **V4.16**| **Overall Process**      | **Version Control:** Is all Stage 4 cycle work committed to Git? Is the codebase in a clean state (`git status`)?                                                             | All changes are committed. No uncommitted work remains.                                                                                                                                                                                        |       ☐       |                               |

**Remediation Process:**

* If any checklist item is marked Fail (❌):
  * **STOP:** Do not consider this Stage 4 cycle complete or the current version ready.
  * **Analyze:** Review the comments to understand the failure (e.g., targeted bug not actually fixed V4.2, regression introduced V4.8, refinement didn't work in BB Ultra V4.4, new feature tests incomplete V4.6).
  * **Correct:** Re-enter the relevant task(s) within Stage 4 (4.1, 4.2, or 4.3). Implement the necessary fixes, ensure tests cover the changes, perform required re-testing (automated and potentially manual/BB Ultra), and update documentation.
  * **Re-Verify:** Once corrections are made, re-execute this entire Verification Checklist from the beginning. Repeat until all items pass.

**Certification:**

* Once all checklist items are marked Pass (✅):
  * **Sign-off:** Formally record the successful completion of this Stage 4 Verification cycle. Options:
    * Tag the commit in Git (e.g., `git tag stage-4-cycle-complete-YYYYMMDD` or `git tag v0.2.0-alpha`).
    * Update status in project tracking tool (e.g., closing the loop on addressed issues).
    * Add dated entry to project README or log: `Stage 4 Cycle Verification completed and passed by [Your Name] on [Date]. Addressed issues [list IDs], implemented refinements [list IDs], added feature [feature name]. Automated tests pass, BB Ultra re-testing confirmed improvements/functionality. System stable at [commit hash/tag].`
  * **Decision Point:** Based on this certified state, decide the next step:
    * Initiate *another* Stage 4 cycle to address lower-priority issues or add more features.
    * Prepare for potential deployment or user testing.
    * Conclude this phase of active development.
